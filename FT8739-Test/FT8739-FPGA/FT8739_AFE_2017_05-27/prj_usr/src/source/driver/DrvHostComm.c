/*******************************************************************************
* Copyright (C) 2013-2014, FocalTech Systems (R)，All Rights Reserved.
*
* File Name: DrvHostComm.c
*
*    Author: 
*
*   Created: 2014-01-02
*
*  Abstract: 
*
* Reference:
*
*******************************************************************************/

/*******************************************************************************
* 1.Included header files
*******************************************************************************/
#include "CfgGlobal.h"
#include "DrvHostComm.h"
#include "CfgAutoTune.h"

/*******************************************************************************
* 2.Private constant and macro definitions using #define
*******************************************************************************/

/*******************************************************************************
* 3.Private enumerations, structures and unions using typedef
*******************************************************************************/

/*******************************************************************************
* 4.Static variables
*******************************************************************************/

/*******************************************************************************
* 5.Global variable or extern global variabls/functions
*******************************************************************************/

/*******************************************************************************
* 6.Static function prototypes
*******************************************************************************/

/*******************************************************************************
*   Name: DrvHostCommInit
*  Brief: Initialize communication port at hardware level based on pre-defined
*         macro _COMM_HOST_PORT
*  Input: None
* Output: None
* Return: None
*******************************************************************************/
void DrvHostCommInit(void)
{
    I2CCKEN = 1;
    
    I2CBUF = 0;
    I2CRI  = 0;
    I2CTI  = 0;

    /* 设置设备地址 */
    I2CADDR = I2C_SLAVE_ADDR & 0xFE;

    /* I2C stop enable */
    I2C_STOP_EI = 1; 
    I2C_STOP_IF = 0;

    I2C_IPH = 0;
    I2C_IPL = 1;    

    /* 开启I2C中断 */
    ET2 = 1; 
    EA = 1;

}

