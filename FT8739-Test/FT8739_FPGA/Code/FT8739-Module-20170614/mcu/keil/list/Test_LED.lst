C251 COMPILER V5.54.0.0,  Test_LED                                                         22/06/17  18:27:21  PAGE 1   


C251 COMPILER V5.54.0.0, COMPILATION OF MODULE Test_LED
OBJECT MODULE PLACED IN .\obj\Test_LED.obj
COMPILER INVOKED BY: D:\Program Files (x86)\keil\C251\BIN\C251.EXE ..\..\src\source\task\Test_LED.c XSMALL ROM(HUGE) OPT
                    -IMIZE(9,SPEED) BROWSE INCDIR(..\..\src\include;..\..\src\include\Debug;..\..\src\include\Drv;..\..\src\include\task;..\.
                    -.\src\include\config) STRING(FAR) DEBUG PRINT(.\list\Test_LED.lst) TABS(2) OBJECT(.\obj\Test_LED.obj) 

stmt  level    source

    1          /*******************************************************************************
    2          * Copyright (C) 2013-2014, FocalTech Systems (R)，All Rights Reserved.
    3          *
    4          * File Name: Test_LED.c
    5          *
    6          *    Author: xinkunpeng
    7          *
    8          *   Created: 2014-06-06
    9          *
   10          *  Abstract:
   11          *
   12          * Reference:
   13          *******************************************************************************/
   14          
   15          /*******************************************************************************
   16          * 1.Included header files
   17          *******************************************************************************/
   18          #include "Test_LED.h"
   19          
   20          #if _TEST_LED_EN
               /*******************************************************************************
               * 2.Private constant and macro definitions using #define
               *******************************************************************************/
               
               /*******************************************************************************
               * 3.Private enumerations, structures and unions using typedef
               *******************************************************************************/
               
               /*******************************************************************************
               * 4.Static variables
               *******************************************************************************/
               
               /*******************************************************************************
               * 5.Global variable or extern global variabls/functions
               *******************************************************************************/
               
               /*******************************************************************************
               * 6.Static function prototypes
               *******************************************************************************/
               
               /*******************************************************************************
               *   Name: Test_LED
               *  Brief:
               *  Input:
               * Output:
               * Return:
               *******************************************************************************/
               void Test_LED(void)
               {
                   UINT8 i = 0;
                   UINT16 j;
                   UINT8 flag;
                   UINT8 tmp1,tmp2;
                   UINT8 counter;
               
                   flag = 0;
                   counter = 5;
C251 COMPILER V5.54.0.0,  Test_LED                                                         22/06/17  18:27:21  PAGE 2   

                   LED_32K_EN = 1;
                   LEDCKEN = 0;
               
                   tmp1 = LED_EN;
                   tmp2 = LED_H_NUM;
                   // 打印寄存器默认值，LED_H_NUM(0xFF)在下程序的时候会被I2C_DEBUG写为0x11
                   DBG_MODE("\n\rLED Test is Start:");
                   DBG_LED("\n\rLED_EN: %02x", tmp1);      
                   DBG_LED("\n\rLED_H_NUM: %02x", tmp2);
               
                   //LED_EN = 0x0F;
                   LED_H_NUM = 0x00;
                   
                   //while (counter--)
                   while(1)
                   {
                       #if 0
                       //寄存器读写遍历
                       i++;
                       LED_EN    = i;
                       LED_H_NUM = i;
                       DBG_LED("\n\rLED_EN: %02x", LED_EN); 
                       DBG_LED("\n\rLED_H_NUM: %02x", LED_H_NUM);
                       DelayMs(200);
                       #else 
                       //模拟呼吸灯输出
                       LED_1_EN = 1;
                       if (flag == 0)
                       {
                           LED_H_NUM = i;
                       }
                       else
                       {
                           LED_H_NUM = 43- i;
                       }
                       DelayMs(50);
                       i++;
                       j++;
               
                       if (i > 43)
                       {
                           flag = ~flag;
                           i = 0;
                       }
               
                       #if 0  
                       if (j > 5000)
                       {
                           LED_EN = 0x00;
                           j = 0;
                       }
                       else if (j > 3000)
                       {
                           LED_EN = 0x01;
                       }
                       else if (j > 2000)
                       {
                           LED_EN = 0x03;
                       }
                       else if (j > 1000)
                       {
                           LED_EN = 0x07;
                       }
                       #endif
                       DBG_LED("\n\rLED_EN_read: %02x", LED_EN);
                       DBG_LED("\n\rLED_H_NUM_read: %02x", LED_H_NUM);
C251 COMPILER V5.54.0.0,  Test_LED                                                         22/06/17  18:27:21  PAGE 3   

                       #endif
                   }
                   DBG_MODE("\n\rLED Test is End!\n");
               }
               #endif
  129          


Module Information          Static   Overlayable
------------------------------------------------
  code size            =    ------     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =    ------     ------
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =    ------     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
